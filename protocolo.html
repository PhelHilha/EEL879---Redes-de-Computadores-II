<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LoRaWAN - Protocolo</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <nav>
            <a href="index.html" class="logo">LoRaWAN</a>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="introducao.html">Introdução</a></li>
                <li><a href="camada-fisica.html">Tecnologia LoRa</a></li>
                <li><a href="protocolo.html">Protocolo</a></li>
                <li><a href="desempenho.html">Desempenho</a></li>
                <li><a href="seguranca.html">Segurança</a></li>
                <li><a href="casos-de-uso.html">Casos de Uso</a></li>
                <li><a href="questoes.html">Questões</a></li>
                <li><a href="bibliografia.html">Bibliografia</a></li>
            </ul>
        </nav>
    </header>
    <main>
        <div class="content-section">
            <h2>3. O Protocolo LoRaWAN: Regras da Rede</h2>
            <p>O <strong>LoRaWAN</strong> (Long Range Wide Area Network) é o protocolo de comunicação em camada MAC responsável por organizar o tráfego de dados em redes que utilizam a modulação <em>LoRa</em>. Enquanto o LoRa corresponde ao nível físico (camada 1 do modelo OSI), garantindo o alcance e a robustez do sinal, o LoRaWAN opera na camada de enlace de dados (camada 2), estabelecendo as <strong>regras de acesso ao meio, segurança, endereçamento e eficiência energética</strong> que tornam a tecnologia adequada para redes IoT massivas.</p>

            <h4>3.1 Função e Camada MAC</h4>
            <p>A principal função do LoRaWAN é <strong>gerenciar o uso do espectro de forma eficiente</strong>, garantindo conectividade de milhares de dispositivos em uma mesma região, sem coordenação complexa. O protocolo adota o esquema de acesso aleatório <em>Pure ALOHA</em>, complementado com mecanismos de confirmação (ACKs), balanceando simplicidade e economia de energia. O <strong>Network Server</strong> atua como controlador central, eliminando duplicatas recebidas por múltiplos gateways, ajustando taxas de transmissão e coordenando a política de acesso ao meio.</p>

            <h4>3.2 Componentes da Arquitetura</h4>
            <p>A rede segue a topologia <em>estrela-de-estrelas</em>, formada por:</p>
            <ul>
                <li><strong>Dispositivos Finais (<em>End-Devices</em>):</strong> Normalmente sensores e atuadores de baixo consumo. Executam tarefas simples e transmitem pequenos pacotes, podendo operar por anos com uma única bateria.</li>
                <li><strong>Gateways:</strong> Recebem os sinais LoRa dos dispositivos e encaminham os dados para o servidor de rede via IP. Cada gateway pode cobrir até 15 km em áreas rurais e cerca de 3 km em áreas urbanas densas.</li>
                <li><strong>Servidor de Rede (NS):</strong> Responsável pela lógica da camada MAC, incluindo deduplicação de pacotes, gerenciamento de janelas de recepção, autenticação, alocação de endereços e ajustes de parâmetros de transmissão (ADR).</li>
                <li><strong>Servidor de Aplicação (AS):</strong> Onde os dados brutos são processados, descriptografados e entregues às aplicações finais, como sistemas de monitoramento ou automação.</li>
                <li><strong>Join Server (JS):</strong> Especializado na autenticação e na distribuição de chaves de segurança durante o processo de adesão (OTAA).</li>
            </ul>

            <h4>3.3 Mecanismo de Acesso (MAC)</h4>
            <p>O LoRaWAN adota o <strong>Pure ALOHA</strong>, em que os dispositivos transmitem sem coordenação prévia. Esse modelo, embora simples e eficiente em consumo, pode sofrer com <strong>colisões de pacotes</strong> em redes muito densas, impactando a escalabilidade. Para mitigar esse problema, o protocolo impõe restrições de <em>duty-cycle</em> (1% na Europa, por exemplo), além do uso de diferentes canais e fatores de espalhamento (SF), que permitem transmissões simultâneas sem interferência direta.</p>

            <h4>3.4 Classes de Dispositivos</h4>
            <p>O protocolo define três classes de operação, otimizando o trade-off entre consumo de energia e latência:</p>
            <ul>
                <li><strong>Classe A (obrigatória):</strong> Extremamente eficiente em energia. Cada uplink abre duas janelas curtas de downlink. Ideal para sensores alimentados por bateria de longa duração.</li>
                <li><strong>Classe B:</strong> Introduz janelas adicionais de recepção em horários sincronizados por <em>beacons</em>, permitindo maior previsibilidade na comunicação. É útil em cenários que exigem comandos periódicos.</li>
                <li><strong>Classe C:</strong> Mantém a recepção aberta continuamente (exceto durante uplinks). Oferece a menor latência, mas com alto consumo de energia, adequado para dispositivos conectados à rede elétrica.</li>
            </ul>

            <h4>3.5 Segurança e Ativação</h4>
            <p>O LoRaWAN implementa <strong>criptografia AES-128</strong> em dois níveis: segurança de rede (integridade e autenticação) e segurança de aplicação (confidencialidade dos dados). Existem dois modos de ativação:</p>
            <ul>
                <li><strong>OTAA (Over-The-Air Activation):</strong> O método mais seguro. O dispositivo envia uma requisição ao servidor de adesão e recebe chaves dinâmicas de sessão (NwkSKey e AppSKey), garantindo maior resiliência contra ataques.</li>
                <li><strong>ABP (Activation by Personalization):</strong> Chaves e endereço são configurados estaticamente no dispositivo. Simples, porém vulnerável a ataques de repetição e clonagem.</li>
            </ul>

            <h4>3.6 Taxa de Dados Adaptativa (ADR)</h4>
            <p>O <strong>Adaptive Data Rate</strong> é um mecanismo central para otimizar o equilíbrio entre alcance, consumo de energia e capacidade da rede. O servidor de rede ajusta dinamicamente parâmetros como o <em>Spreading Factor (SF)</em> e a potência de transmissão (TP) de cada dispositivo. Dessa forma:</p>
            <ul>
                <li>Dispositivos próximos ao gateway usam SF menores (maior taxa de dados, menor tempo no ar, menor consumo).</li>
                <li>Dispositivos mais distantes recebem SF maiores, garantindo alcance mesmo com maior consumo e latência.</li>
            </ul>
            <p>Esse mecanismo permite aumentar significativamente a capacidade global da rede, reduzindo colisões e prolongando a vida útil das baterias.</p>

            <h4>3.7 Limitações e Desafios</h4>
            <p>Apesar de suas vantagens, o LoRaWAN enfrenta desafios relevantes:</p>
            <ul>
                <li><strong>Escalabilidade:</strong> O aumento do número de dispositivos eleva colisões e retransmissões, impactando o throughput.</li>
                <li><strong>Eficiência Energética:</strong> Estratégias de economia são essenciais, pois muitos dispositivos operam em locais de difícil acesso para troca de baterias.</li>
                <li><strong>Latência:</strong> Em aplicações críticas (ex.: alarmes em tempo real), a natureza assíncrona e o duty-cycle podem ser limitantes.</li>
                <li><strong>Segurança:</strong> Embora haja criptografia, dispositivos configurados em ABP ou com chaves mal gerenciadas são alvos fáceis de ataques.</li>
            </ul>
        </div>
    </main>
</body>
</html>
